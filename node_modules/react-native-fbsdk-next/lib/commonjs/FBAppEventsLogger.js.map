{"version":3,"names":["AppEventsLogger","NativeModules","FBAppEventsLogger","AppEvents","AppEventParams","getConstants","setFlushBehavior","flushBehavior","logEvent","eventName","valueToSum","args","Number","shift","parameters","logPurchase","purchaseAmount","currencyCode","logPushNotificationOpen","payload","logProductItem","itemID","availability","condition","description","imageLink","link","title","priceAmount","currency","gtin","mpn","brand","isDefined","isString","Error","isOneOf","isNumber","flush","setUserID","userID","Platform","OS","clearUserID","getUserID","getAnonymousID","getAdvertiserID","getAttributionID","setUserData","userData","setPushNotificationsDeviceToken","deviceToken","setPushNotificationsRegistrationId","registrationId"],"sources":["FBAppEventsLogger.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc. All rights reserved.\n *\n * You are hereby granted a non-exclusive, worldwide, royalty-free license to use,\n * copy, modify, and distribute this software in source code or binary form for use\n * in connection with the web services and APIs provided by Facebook.\n *\n * As with any software that integrates with the Facebook platform, your use of\n * this software is subject to the Facebook Developer Principles and Policies\n * [http://developers.facebook.com/policy/]. This copyright notice shall be\n * included in all copies or substantial portions of the software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * @format\n */\nimport {isDefined, isNumber, isOneOf, isString} from './util/validate';\nimport {NativeModules} from 'react-native';\nimport {Platform} from 'react-native';\n\nconst AppEventsLogger = NativeModules.FBAppEventsLogger;\n\n/**\n * Controls when an AppEventsLogger sends log events to the server\n */\nexport type AppEventsFlushBehavior =\n  /**\n   * Flush automatically: periodically (every 15 seconds or after every 100 events), and\n   * always at app reactivation. This is the default value.\n   */\n  | 'auto'\n  /**\n   * Only flush when AppEventsLogger.flush() is explicitly invoked.\n   */\n  | 'explicit_only';\n\n/**\n * Specifies product availability for Product Catalog product item update\n */\nexport type ProductAvailability =\n  /**\n   * Item ships immediately\n   */\n  | 'in_stock'\n  /**\n   * No plan to restock\n   */\n  | 'out_of_stock'\n  /**\n   * Available in future\n   */\n  | 'preorder'\n  /**\n   * Ships in 1-2 weeks\n   */\n  | 'avaliable_for_order'\n  /**\n   * Discontinued\n   */\n  | 'discontinued';\n\n/**\n * Specifies product condition for Product Catalog product item update\n */\nexport type ProductCondition = 'new' | 'refurbished' | 'used';\n\nexport type Params = {[key: string]: string | number};\n\n/**\n * Info about a user to increase chances of matching a Facebook user.\n * See https://developers.facebook.com/docs/app-events/advanced-matching for\n * more info about the expected format of each field.\n */\nexport type UserData = Readonly<{\n  email?: string;\n  firstName?: string;\n  lastName?: string;\n  phone?: string;\n  dateOfBirth?: string;\n  gender?: 'm' | 'f';\n  city?: string;\n  state?: string;\n  zip?: string;\n  country?: string;\n}>;\n\nexport type AppEvent = {\n  AchievedLevel: string;\n  AdClick: string;\n  AdImpression: string;\n  AddedPaymentInfo: string;\n  AddedToCart: string;\n  AddedToWishlist: string;\n  CompletedRegistration: string;\n  CompletedTutorial: string;\n  Contact: string;\n  CustomizeProduct: string;\n  Donate: string;\n  FindLocation: string;\n  InitiatedCheckout: string;\n  Purchased: string;\n  Rated: string;\n  Searched: string;\n  SpentCredits: string;\n  Schedule: string;\n  StartTrial: string;\n  SubmitApplication: string;\n  Subscribe: string;\n  UnlockedAchievement: string;\n  ViewedContent: string;\n};\n\nexport type AppEventParam = {\n  AddType: string;\n  Content: string;\n  ContentID: string;\n  ContentType: string;\n  Currency: string;\n  Description: string;\n  Level: string;\n  NumItems: string;\n  MaxRatingValue: string;\n  OrderId: string;\n  PaymentInfoAvailable: string;\n  RegistrationMethod: string;\n  SearchString: string;\n  Success: string;\n  ValueNo: string;\n  ValueYes: string;\n};\n\nconst {AppEvents, AppEventParams} = AppEventsLogger?.getConstants() || {};\n\nexport default {\n  /**\n   * Sets the current event flushing behavior specifying when events\n   * are sent back to Facebook servers.\n   */\n  setFlushBehavior(flushBehavior: AppEventsFlushBehavior) {\n    AppEventsLogger.setFlushBehavior(flushBehavior);\n  },\n\n  /**\n   * Logs an event with eventName and optional arguments.\n   * This function supports the following usage:\n   * logEvent(eventName: string);\n   * logEvent(eventName: string, valueToSum: number);\n   * logEvent(eventName: string, parameters: {[key:string]:string|number});\n   * logEvent(eventName: string, valueToSum: number, parameters: {[key:string]:string|number});\n   * See https://developers.facebook.com/docs/app-events/android for detail.\n   */\n  logEvent(eventName: string, ...args: Array<number | Params>) {\n    let valueToSum = 0;\n    if (typeof args[0] === 'number') {\n      valueToSum = Number(args.shift());\n    }\n    let parameters = null;\n    if (typeof args[0] === 'object') {\n      parameters = args[0];\n    }\n    AppEventsLogger.logEvent(eventName, valueToSum, parameters);\n  },\n\n  /**\n   * Logs a purchase. See http://en.wikipedia.org/wiki/ISO_4217 for currencyCode.\n   */\n  logPurchase(\n    purchaseAmount: number,\n    currencyCode: string,\n    parameters?: Params,\n  ) {\n    AppEventsLogger.logPurchase(purchaseAmount, currencyCode, parameters);\n  },\n\n  /**\n   * Logs an app event that tracks that the application was open via Push Notification.\n   */\n  logPushNotificationOpen(payload?: Record<string, string | number>) {\n    AppEventsLogger.logPushNotificationOpen(payload);\n  },\n\n  /**\n   * Uploads product catalog product item as an app event\n   * @param itemID – Unique ID for the item. Can be a variant for a product. Max size is 100.\n   * @param availability – If item is in stock. Accepted values are: in stock - Item ships immediately out of stock - No plan to restock preorder - Available in future available for order - Ships in 1-2 weeks discontinued - Discontinued\n   * @param condition – Product condition: new, refurbished or used.\n   * @param description – Short text describing product. Max size is 5000.\n   * @param imageLink – Link to item image used in ad.\n   * @param link – Link to merchant's site where someone can buy the item.\n   * @param title – Title of item.\n   * @param priceAmount – Amount of purchase, in the currency specified by the 'currency' parameter. This value will be rounded to the thousandths place (e.g., 12.34567 becomes 12.346).\n   * @param currency – Currency used to specify the amount.\n   * @param gtin – Global Trade Item Number including UPC, EAN, JAN and ISBN\n   * @param mpn – Unique manufacture ID for product\n   * @param brand – Name of the brand Note: Either gtin, mpn or brand is required.\n   * @param parameters – Optional fields for deep link specification.\n   */\n  logProductItem(\n    itemID: string,\n    availability: ProductAvailability,\n    condition: ProductCondition,\n    description: string,\n    imageLink: string,\n    link: string,\n    title: string,\n    priceAmount: number,\n    currency: string,\n    gtin?: string,\n    mpn?: string,\n    brand?: string,\n    parameters?: Params,\n  ) {\n    if (!isDefined(itemID) || !isString(itemID)) {\n      throw new Error(\"logProductItem expected 'itemID' to be a string\");\n    }\n    if (\n      !isDefined(availability) ||\n      !isOneOf(availability, [\n        'in_stock',\n        'out_of_stock',\n        'preorder',\n        'avaliable_for_order',\n        'discontinued',\n      ])\n    ) {\n      throw new Error(\n        \"logProductItem expected 'availability' to be one of 'in_stock' | 'out_of_stock' | 'preorder' | 'avaliable_for_order' | 'discontinued'\",\n      );\n    }\n    if (\n      !isDefined(condition) ||\n      !isOneOf(condition, ['new', 'refurbished', 'used'])\n    ) {\n      throw new Error(\n        \"logProductItem expected 'condition' to be one of 'new' | 'refurbished' | 'used'\",\n      );\n    }\n    if (!isDefined(description) || !isString(description)) {\n      throw new Error(\"logProductItem expected 'description' to be a string\");\n    }\n    if (!isDefined(imageLink) || !isString(imageLink)) {\n      throw new Error(\"logProductItem expected 'imageLink' to be a string\");\n    }\n    if (!isDefined(link) || !isString(link)) {\n      throw new Error(\"logProductItem expected 'link' to be a string\");\n    }\n    if (!isDefined(title) || !isString(title)) {\n      throw new Error(\"logProductItem expected 'title' to be a string\");\n    }\n    if (!isDefined(priceAmount) || !isNumber(priceAmount)) {\n      throw new Error(\"logProductItem expected 'priceAmount' to be a number\");\n    }\n    if (!isDefined(currency) || !isString(currency)) {\n      throw new Error(\"logProductItem expected 'currency' to be a string\");\n    }\n    if (!isDefined(gtin) && !isDefined(mpn) && !isDefined(brand)) {\n      throw new Error(\n        'logProductItem expected either gtin, mpn or brand to be defined',\n      );\n    }\n\n    AppEventsLogger.logProductItem(\n      itemID,\n      availability,\n      condition,\n      description,\n      imageLink,\n      link,\n      title,\n      priceAmount,\n      currency,\n      gtin,\n      mpn,\n      brand,\n      parameters,\n    );\n  },\n\n  /**\n   * Explicitly kicks off flushing of events to Facebook.\n   */\n  flush() {\n    AppEventsLogger.flush();\n  },\n\n  /**\n   * Sets a custom user ID to associate with all app events.\n   * The userID is persisted until this method is called again with a null userId\n   */\n  setUserID(userID: string | null) {\n    if (userID === null && Platform.OS === 'android') {\n      // TODO: Remove workaround once https://github.com/facebook/facebook-android-sdk/issues/1047 is released\n      AppEventsLogger.clearUserID();\n      return;\n    }\n    AppEventsLogger.setUserID(userID);\n  },\n\n  /**\n   * Clears the currently set user id.\n   * @deprecated use setUserID(null) instead\n   */\n  clearUserID() {\n    AppEventsLogger.clearUserID();\n  },\n\n  /**\n   * Returns user id or null if not set\n   */\n  async getUserID(): Promise<string | null> {\n    return await AppEventsLogger.getUserID();\n  },\n\n  /**\n   * Returns anonymous id or null if not set\n   */\n  async getAnonymousID(): Promise<string | null> {\n    return await AppEventsLogger.getAnonymousID();\n  },\n\n  /**\n   * Returns advertiser id or null if not set\n   */\n  async getAdvertiserID(): Promise<string | null> {\n    return await AppEventsLogger.getAdvertiserID();\n  },\n\n  /**\n   * Returns advertiser id or null if not set.\n   * @platform android\n   */\n  async getAttributionID(): Promise<string | null> {\n    if (Platform.OS === 'ios') {\n      return null;\n    }\n    return await AppEventsLogger.getAttributionID();\n  },\n\n  /**\n   * Set additional data about the user to increase chances of matching a Facebook user.\n   */\n  setUserData(userData: UserData) {\n    AppEventsLogger.setUserData(userData);\n  },\n\n  /**\n   * For iOS only, sets and sends device token to register the current application for push notifications.\n   * @platform ios\n   */\n  setPushNotificationsDeviceToken(deviceToken: string) {\n    AppEventsLogger.setPushNotificationsDeviceToken(deviceToken);\n  },\n\n  /**\n   * For Android only, sets and sends registration id to register the current app for push notifications.\n   * @platform Android\n   */\n  setPushNotificationsRegistrationId(registrationId: string) {\n    AppEventsLogger.setPushNotificationsRegistrationId(registrationId);\n  },\n\n  /**\n   * Predefined event names for logging events common to many apps.\n   */\n  AppEvents,\n\n  /**\n   *  Predefined event name parameters for common additional information to accompany events logged through the `logEvent`.\n   */\n  AppEventParams,\n};\n"],"mappings":";;;;;;;AAqBA;;AACA;;AAtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA,MAAMA,eAAe,GAAGC,0BAAA,CAAcC,iBAAtC;AAEA;AACA;AACA;;AA2GA,MAAM;EAACC,SAAD;EAAYC;AAAZ,IAA8B,CAAAJ,eAAe,SAAf,IAAAA,eAAe,WAAf,YAAAA,eAAe,CAAEK,YAAjB,OAAmC,EAAvE;eAEe;EACb;AACF;AACA;AACA;EACEC,gBAAgB,CAACC,aAAD,EAAwC;IACtDP,eAAe,CAACM,gBAAhB,CAAiCC,aAAjC;EACD,CAPY;;EASb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,QAAQ,CAACC,SAAD,EAAqD;IAC3D,IAAIC,UAAU,GAAG,CAAjB;;IAD2D,kCAA9BC,IAA8B;MAA9BA,IAA8B;IAAA;;IAE3D,IAAI,OAAOA,IAAI,CAAC,CAAD,CAAX,KAAmB,QAAvB,EAAiC;MAC/BD,UAAU,GAAGE,MAAM,CAACD,IAAI,CAACE,KAAL,EAAD,CAAnB;IACD;;IACD,IAAIC,UAAU,GAAG,IAAjB;;IACA,IAAI,OAAOH,IAAI,CAAC,CAAD,CAAX,KAAmB,QAAvB,EAAiC;MAC/BG,UAAU,GAAGH,IAAI,CAAC,CAAD,CAAjB;IACD;;IACDX,eAAe,CAACQ,QAAhB,CAAyBC,SAAzB,EAAoCC,UAApC,EAAgDI,UAAhD;EACD,CA5BY;;EA8Bb;AACF;AACA;EACEC,WAAW,CACTC,cADS,EAETC,YAFS,EAGTH,UAHS,EAIT;IACAd,eAAe,CAACe,WAAhB,CAA4BC,cAA5B,EAA4CC,YAA5C,EAA0DH,UAA1D;EACD,CAvCY;;EAyCb;AACF;AACA;EACEI,uBAAuB,CAACC,OAAD,EAA4C;IACjEnB,eAAe,CAACkB,uBAAhB,CAAwCC,OAAxC;EACD,CA9CY;;EAgDb;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,cAAc,CACZC,MADY,EAEZC,YAFY,EAGZC,SAHY,EAIZC,WAJY,EAKZC,SALY,EAMZC,IANY,EAOZC,KAPY,EAQZC,WARY,EASZC,QATY,EAUZC,IAVY,EAWZC,GAXY,EAYZC,KAZY,EAaZlB,UAbY,EAcZ;IACA,IAAI,CAAC,IAAAmB,mBAAA,EAAUZ,MAAV,CAAD,IAAsB,CAAC,IAAAa,kBAAA,EAASb,MAAT,CAA3B,EAA6C;MAC3C,MAAM,IAAIc,KAAJ,CAAU,iDAAV,CAAN;IACD;;IACD,IACE,CAAC,IAAAF,mBAAA,EAAUX,YAAV,CAAD,IACA,CAAC,IAAAc,iBAAA,EAAQd,YAAR,EAAsB,CACrB,UADqB,EAErB,cAFqB,EAGrB,UAHqB,EAIrB,qBAJqB,EAKrB,cALqB,CAAtB,CAFH,EASE;MACA,MAAM,IAAIa,KAAJ,CACJ,uIADI,CAAN;IAGD;;IACD,IACE,CAAC,IAAAF,mBAAA,EAAUV,SAAV,CAAD,IACA,CAAC,IAAAa,iBAAA,EAAQb,SAAR,EAAmB,CAAC,KAAD,EAAQ,aAAR,EAAuB,MAAvB,CAAnB,CAFH,EAGE;MACA,MAAM,IAAIY,KAAJ,CACJ,iFADI,CAAN;IAGD;;IACD,IAAI,CAAC,IAAAF,mBAAA,EAAUT,WAAV,CAAD,IAA2B,CAAC,IAAAU,kBAAA,EAASV,WAAT,CAAhC,EAAuD;MACrD,MAAM,IAAIW,KAAJ,CAAU,sDAAV,CAAN;IACD;;IACD,IAAI,CAAC,IAAAF,mBAAA,EAAUR,SAAV,CAAD,IAAyB,CAAC,IAAAS,kBAAA,EAAST,SAAT,CAA9B,EAAmD;MACjD,MAAM,IAAIU,KAAJ,CAAU,oDAAV,CAAN;IACD;;IACD,IAAI,CAAC,IAAAF,mBAAA,EAAUP,IAAV,CAAD,IAAoB,CAAC,IAAAQ,kBAAA,EAASR,IAAT,CAAzB,EAAyC;MACvC,MAAM,IAAIS,KAAJ,CAAU,+CAAV,CAAN;IACD;;IACD,IAAI,CAAC,IAAAF,mBAAA,EAAUN,KAAV,CAAD,IAAqB,CAAC,IAAAO,kBAAA,EAASP,KAAT,CAA1B,EAA2C;MACzC,MAAM,IAAIQ,KAAJ,CAAU,gDAAV,CAAN;IACD;;IACD,IAAI,CAAC,IAAAF,mBAAA,EAAUL,WAAV,CAAD,IAA2B,CAAC,IAAAS,kBAAA,EAAST,WAAT,CAAhC,EAAuD;MACrD,MAAM,IAAIO,KAAJ,CAAU,sDAAV,CAAN;IACD;;IACD,IAAI,CAAC,IAAAF,mBAAA,EAAUJ,QAAV,CAAD,IAAwB,CAAC,IAAAK,kBAAA,EAASL,QAAT,CAA7B,EAAiD;MAC/C,MAAM,IAAIM,KAAJ,CAAU,mDAAV,CAAN;IACD;;IACD,IAAI,CAAC,IAAAF,mBAAA,EAAUH,IAAV,CAAD,IAAoB,CAAC,IAAAG,mBAAA,EAAUF,GAAV,CAArB,IAAuC,CAAC,IAAAE,mBAAA,EAAUD,KAAV,CAA5C,EAA8D;MAC5D,MAAM,IAAIG,KAAJ,CACJ,iEADI,CAAN;IAGD;;IAEDnC,eAAe,CAACoB,cAAhB,CACEC,MADF,EAEEC,YAFF,EAGEC,SAHF,EAIEC,WAJF,EAKEC,SALF,EAMEC,IANF,EAOEC,KAPF,EAQEC,WARF,EASEC,QATF,EAUEC,IAVF,EAWEC,GAXF,EAYEC,KAZF,EAaElB,UAbF;EAeD,CA/IY;;EAiJb;AACF;AACA;EACEwB,KAAK,GAAG;IACNtC,eAAe,CAACsC,KAAhB;EACD,CAtJY;;EAwJb;AACF;AACA;AACA;EACEC,SAAS,CAACC,MAAD,EAAwB;IAC/B,IAAIA,MAAM,KAAK,IAAX,IAAmBC,qBAAA,CAASC,EAAT,KAAgB,SAAvC,EAAkD;MAChD;MACA1C,eAAe,CAAC2C,WAAhB;MACA;IACD;;IACD3C,eAAe,CAACuC,SAAhB,CAA0BC,MAA1B;EACD,CAnKY;;EAqKb;AACF;AACA;AACA;EACEG,WAAW,GAAG;IACZ3C,eAAe,CAAC2C,WAAhB;EACD,CA3KY;;EA6Kb;AACF;AACA;EACE,MAAMC,SAAN,GAA0C;IACxC,OAAO,MAAM5C,eAAe,CAAC4C,SAAhB,EAAb;EACD,CAlLY;;EAoLb;AACF;AACA;EACE,MAAMC,cAAN,GAA+C;IAC7C,OAAO,MAAM7C,eAAe,CAAC6C,cAAhB,EAAb;EACD,CAzLY;;EA2Lb;AACF;AACA;EACE,MAAMC,eAAN,GAAgD;IAC9C,OAAO,MAAM9C,eAAe,CAAC8C,eAAhB,EAAb;EACD,CAhMY;;EAkMb;AACF;AACA;AACA;EACE,MAAMC,gBAAN,GAAiD;IAC/C,IAAIN,qBAAA,CAASC,EAAT,KAAgB,KAApB,EAA2B;MACzB,OAAO,IAAP;IACD;;IACD,OAAO,MAAM1C,eAAe,CAAC+C,gBAAhB,EAAb;EACD,CA3MY;;EA6Mb;AACF;AACA;EACEC,WAAW,CAACC,QAAD,EAAqB;IAC9BjD,eAAe,CAACgD,WAAhB,CAA4BC,QAA5B;EACD,CAlNY;;EAoNb;AACF;AACA;AACA;EACEC,+BAA+B,CAACC,WAAD,EAAsB;IACnDnD,eAAe,CAACkD,+BAAhB,CAAgDC,WAAhD;EACD,CA1NY;;EA4Nb;AACF;AACA;AACA;EACEC,kCAAkC,CAACC,cAAD,EAAyB;IACzDrD,eAAe,CAACoD,kCAAhB,CAAmDC,cAAnD;EACD,CAlOY;;EAoOb;AACF;AACA;EACElD,SAvOa;;EAyOb;AACF;AACA;EACEC;AA5Oa,C"}